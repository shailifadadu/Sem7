-> docker login
-> docker login -u <user-name>

1) FOR JAVA APP

-> create a folder java-app
-> open with IntelliJ
-> write HelloWorld.java program
-> write Dockerfile

FROM OpenJDK:11
COPY HelloWorld.java /tmp
WORKDIR /tmp
RUN javac HelloWorld.java
CMD ["java","HelloWorld"]

-> docker build -t java-app-devops .
-> docker run java-app-devops
-> create Dockerfile2

FROM OpenJDK:11
WORKDIR /usr/src/app
COPY . .
RUN javac HelloWorld.java
CMD ["java","HelloWorld"]

-> docker build -t java-app-devops-2 -f Dockerfile2 .
-> docker run --name java-app-2 java-app-devops-2

2) FOR RUNNING WEB APPLICATION INSIDE TOMCAT CONTAINER

-> Create a my-web-app folder
-> Create a Dockerfile inside the project

FROM tomcat:latest
ADD ./webapp /usr/local/tomcat/webapp
CMD ["Catalina.sh","run"]

-> docker build -t my-tomcat-app .
-> docker run -d --name my-tc-container -p 8080:8080 my-tomcat-app
-> open localhost:8080/webapp/

3) PULLING AN IMAGE AND THEN RUNNING ITS CONTAINER

-> docker pull MySQL
-> docker run -d -p 3316:3306 --name mysql-db -e MYSQL_ROOT_PASSWORD=password MySQL
->To view the db using command line :
  
  docker exec -it <container-id> /bin/bash

-> #mysql -u root -p
->after entering password

mysql> select * from test.employee
mysql> exit
 -> #exit

4) Multicontainer application

-> .\mvnw package -DskipTests
-> Dockerfile for Spring Boot Project

FROM OpenJDK:19
ADD target/employee-test-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java","-jar","app.jar"]

-> Content of docker-compose.yml

services:
	mysqldb:
		container_name: emp-db-container
		image: MySQL
		environment:
			MYSQL_USER: appuser
			MYSQL_PASSWORD: password
			MYSQL_DATABASE: test
			MYSQL_ROOT_PASSWORD: password
		ports:
			- 3316:3306
		volumes:
			- ./mysql-data:/var/lib/MySQL
		networks:
			emp-app-mysql-netw:

	emp-rest-api:
		container_name: emp-api
		build: 
			context: ./employee-test
			dockerfile: Dockerfile
		ports:
			- 8080:8080
		depends_on:
			- mysqldb
		environment:
  			- spring.jpa.hibernate.ddl-auto=update
  			- spring.datasource.url=jdbc:mysql://mysqldb:3306/employeedb
  			- spring.datasource.username=appuser
  			- spring.datasource.password=password
		networks:
  			emp-app-mysql-netw:
		restart: on-failure

networks:
	emp-app-mysql-netw:


-> cd to multicontainerapp
-> docker-compose up